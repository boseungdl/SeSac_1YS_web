<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <link rel="stylesheet"href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="https://kit.fontawesome.com/53cd30409b.js" crossorigin="anonymous"></script>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Rubik+Bubbles&family=Secular+One&display=swap" rel="stylesheet">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Dongle&family=Rubik+Bubbles&family=Secular+One&display=swap" rel="stylesheet">
		<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
				font-family: 'Rubik Bubbles', 'Dongle';
				font-size: 1.3rem;
			}
			li {
          list-style: none;
			}
			ul {
				padding: 0;
			}
			header {
					width: 100%;
					display: flex;
					justify-content: space-between;
					align-items: center;
			}
			main {
					max-width: 1400px;
					margin: 0 auto;
			}
			body {
					
			}
			.row, .col {
					padding: 0 !important; 
					margin: 0 !important; 
					box-sizing: border-box;
			}
			.swiper {
					height: 100vh;
			}
			header {
					height: 50px;
					background: #000;
					color: #fff;
			}
			nav {
					height: 100%;
					display: flex;
					justify-content: space-between;
			}
			nav ul {
					display: flex;
					justify-content: space-between;
					align-items: center;
					height: 100%;
					width: 100%;
			}
			header li {
				padding: 0 10px;
			}
			.my {
	
			}
			.my li {
				list-style: square;
			}
			td {
				border-width: 1px;
				padding: 15px;
			}
    </style>
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  </head>
  <body>
		<header>
				<h2>js뽐내기</h2>
				<nav>
						<ul>
								<li>테트리스</li>
								<li>가위바위보</li>
								<li>가위바위보</li>
								<li>...</li>
						</ul>
						
				</nav>
				<div>
						<label for="">검색</label>
						<input type="text" placeholder="궁금한 id를 입력하세요.">
				</div>
				<div>
						<button onclick="register()">정보등록하기</button>
				</div>
		</header>
		<main style="padding-top: 20px;">
			<div class="row">
				<div class="col-3">
					<div style="width: 80%; height: 100px; background: rgb(238, 236, 236);">
						<div>
							<img src="" alt="" width="50" height="50" style="background: #000; border-radius: 50%;">
							<span>한승보</span>
							<p>자기소개 : 등등</p>
						</div>
					</div>
					<ul class=" my" style="height: 20vh;">
						<li>입장 인원</li>
						<li>게임이름</li>
						<li>순위</li>
						<li>게임시간</li>
						<li>횟수 등등</li>
					</ul>
				
					<div>
						<canvas id="myChart"></canvas>
					</div>
				</div>
				<div class="col-6">
					<div class="swiper">
						<!-- Additional required wrapper -->
						<div class="swiper-wrapper">
							<!-- Slides -->
							<div class="swiper-slide">
								<div style="background: rgb(205, 239, 254); height: 100vh;">
									<table border="1" cellspacing="0" cellpadding="20" >
										
										<tbody>
										
										</tbody>
									</table>
								</div>
							</div>
							<div class="swiper-slide">Slide 2</div>
							<div class="swiper-slide">Slide 3</div>
							...
						</div>
						<!-- If we need pagination -->
						<div class="swiper-pagination"></div>
					
						<!-- If we need navigation buttons -->
						<div class="swiper-button-prev"></div>
						<div class="swiper-button-next"></div>
					
						<!-- If we need scrollbar -->
						<div class="swiper-scrollbar"></div>
					</div>
				</div>
					<div class="col-3">
						<h3 onclick="makeTetris()">해당 게임 랭킹!</h3>
						<h4 onclick="makeBlock()" style="padding: 70px 0 20px 0;">1등 : 킹킹왕</h4>
						<canvas id="myChart2" height="300"></canvas>
					</div>
			</div>
		</main>
      
    
      <script>
        const swiper = new Swiper('.swiper', {

            // Optional parameters
            direction: 'vertical',
            loop: true,

            // If we need pagination
            pagination: {
                el: '.swiper-pagination',
            },

            // Navigation arrows
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },

            // And if we need scrollbar
            scrollbar: {
                el: '.swiper-scrollbar',
            },
        });

				
				const labels = [
					'January',
					'February',
					'March',
					'April',
					'May',
					'June',
				];

				const data = {
					labels: [
						'장애물 피하기',
						'반응속도',
						'포커',
						'전투',
						'테트리스',
						'지뢰찾기',
						'가위바위보'
					],
					datasets: [{
						label: '내 능력치',
						data: [65, 59, 90, 81, 56, 55, 40],
						fill: true,
						backgroundColor: 'rgba(255, 99, 132, 0.2)',
						borderColor: 'rgb(255, 99, 132)',
						pointBackgroundColor: 'rgb(255, 99, 132)',
						pointBorderColor: '#fff',
						pointHoverBackgroundColor: '#fff',
						pointHoverBorderColor: 'rgb(255, 99, 132)'
					}, {
						label: '경쟁자 능력치',
						data: [28, 48, 40, 19, 96, 27, 100],
						fill: true,
						backgroundColor: 'rgba(54, 162, 235, 0.2)',
						borderColor: 'rgb(54, 162, 235)',
						pointBackgroundColor: 'rgb(54, 162, 235)',
						pointBorderColor: '#fff',
						pointHoverBackgroundColor: '#fff',
						pointHoverBorderColor: 'rgb(54, 162, 235)'
					}]
				};

				const config = {
					type: 'radar',
					data: data,
					options: {
						elements: {
							line: {
								borderWidth: 3
							}
						}
					},
				};

				const myChart = new Chart(
					document.getElementById('myChart'),
					config
				);
      </script>


			<script>
				

				const data2 = {
					labels: labels,
					datasets: [{
						label: 'My First Dataset',
						data: [65, 59, 80, 81, 56, 55, 40],
						backgroundColor: [
							'rgba(255, 99, 132, 0.2)',
							'rgba(255, 159, 64, 0.2)',
							'rgba(255, 205, 86, 0.2)',
							'rgba(75, 192, 192, 0.2)',
							'rgba(54, 162, 235, 0.2)',
							'rgba(153, 102, 255, 0.2)',
							'rgba(201, 203, 207, 0.2)'
						],
						borderColor: [
							'rgb(255, 99, 132)',
							'rgb(255, 159, 64)',
							'rgb(255, 205, 86)',
							'rgb(75, 192, 192)',
							'rgb(54, 162, 235)',
							'rgb(153, 102, 255)',
							'rgb(201, 203, 207)'
						],
						borderWidth: 1
					}]
				};
				const config2 = {
					type: 'bar',
					data: data2,
					options: {
						scales: {
							y: {
								beginAtZero: true
							}
						}
					},
				};

				const myChart2 = new Chart(
					document.getElementById('myChart2'),
					config2
				);
			</script>


			<script>
				window.addEventListener("load", () => {
					Swal.fire('정보를 등록하고 입장하세요!')
				})

				async function register(){
					const { value: nickname } = await Swal.fire({
					title: 'Input nickname',
					input: 'text',
					inputLabel: 'Your nickname',
					inputPlaceholder: 'Enter your nickname'
					})

					if (nickname) {
					Swal.fire(`Entered nickname: ${nickname}`)
					}
				}
				

				//테트리스
				
			</script>


<script>
	const $tbody = document.querySelector("tbody")
	const blocks = [];
	const blockInfo = [
		{name : 'a', shape:[[0,0],[0,1],[0,2],[0,3]], bg: 'red'},
		{name : 'b', shape:[[0,0],[1,0],[2,0],[2,1]], bg: 'blue'},
		{name : 'c', shape:[[0,0],[0,1],[1,0],[1,1]], bg: 'green'},
	]
	const makeTetris = function(){
		Array(20).fill().forEach((tr) => {
			const $tr = document.createElement("tr");

			Array(10).fill(1).forEach(() => {
				const $td = document.createElement("td");
				
				$tr.append($td)
			})
			$tbody.append($tr)
		})
		console.log($tbody)
	
	}

	const makeBlock = function(){
		let index = Math.round(Math.random()*(blockInfo.length-1))
		console.log("makeBlock")
		
		 //랜덤으로 생성
		blocks.push(new createBlock(JSON.parse(JSON.stringify(blockInfo[index]))))
	}

	

	class createBlock {
			constructor(blockInfo){
			this.name = blockInfo.name;
			this.cells = blockInfo.shape;
			console.log(blockInfo)
			this.bg = blockInfo.bg;
			this.screen()
			setInterval(() => {
				blocks[blocks.length - 1].moveBlock(40)
			},1000)
		}


		screen(){
			this.cells.forEach((cell,i) => {
				const tr = document.querySelectorAll("tr")[this.cells[i][0]]
				const td = tr.querySelectorAll("td")[this.cells[i][1]]
				td.style.backgroundColor = this.bg;
				console.log(td)
			})
		}

		moveBlock(keyCode){
			//if(){} 맨밑에 다으면 makeBlock() return
			var next = function(){
				
			}
			switch(keyCode){
				case 37 : 
					console.log(37);
					break;
				case 40 : 
				console.log(this.cells);
				
				this.cells.forEach((cell,i) => {
					console.log(document.querySelectorAll("tr")[this.cells[i][0]+1].style.bg)
					if(document.querySelectorAll("tr")[this.cells[i][0]+1]?.style.bg) makeBlock(); 
						const tr = document.querySelectorAll("tr")[this.cells[i][0]]
						const td = tr.querySelectorAll("td")[this.cells[i][1]]
						td.style.backgroundColor = 'white';
					})
				
					this.cells.forEach((cell,i) => {
						cell[0] = cell[0] + 1
					})
					this.cells.forEach((cell,i) => {
						const tr = document.querySelectorAll("tr")[this.cells[i][0]]
						const td = tr.querySelectorAll("td")[this.cells[i][1]]
						td.style.backgroundColor = this.bg;
					})
					break;
				case 39 : 
					console.log(39);
					break;
				default : '';
			}
		}
	}

	setInterval(() => {

	}, 1000)

	window.addEventListener("keyup", (e) => {
		console.log(blocks[blocks.length-1])
		console.log(e.keyCode)
		blocks[blocks.length-1].moveBlock(e.keyCode);
	})





</script>
  </body>
</html>